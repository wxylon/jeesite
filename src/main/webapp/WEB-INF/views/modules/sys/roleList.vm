#set($title='角色管理')
<ul class="nav nav-tabs">
	<li class="active"><a href="${ctx}/sys/role/">角色列表</a></li>
	#if($shiro.hasPermission('sys:role:edit'))<li><a href="${ctx}/sys/role/form">角色添加</a></li>#end
</ul>
#sysMessage($!{message})
<table id="contentTable" class="table table-striped table-bordered table-condensed">
	<tr><th>角色名称</th><th>英文名称</th><th>归属机构</th><th>数据范围</th>#if($shiro.hasPermission('sys:role:edit'))<th>操作</th>#end</tr>
	#foreach($role in ${list})
		<tr>
			<td><a href="form?id=${role.id}">${role.name}</a></td>
			<td><a href="form?id=${role.id}">${role.enname}</a></td>
			<td>${role.office.name}</td>
			<td>$dictUtils.getDictLabel(${role.dataScope}, 'sys_data_scope', '无')</td>
			#if($shiro.hasPermission('sys:role:edit'))
				<td>
					<a href="${ctx}/sys/role/assign?id=${role.id}">分配</a>
					#if((${role.sysData} == $dictUtils.getDictValue('是', 'yes_no', '1') && $userUtils.getUser().admin) || (${role.sysData} != $dictUtils.getDictValue('是', 'yes_no', '1')))
						<a href="${ctx}/sys/role/form?id=${role.id}">修改</a>
					#end
					<a href="${ctx}/sys/role/delete?id=${role.id}" onclick="return confirmx('确认要删除该角色吗？', this.href)">删除</a>
				</td>
			#end
		</tr>
	#end
</table>