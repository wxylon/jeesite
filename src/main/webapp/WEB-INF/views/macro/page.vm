#macro (showPage $module $page)
    #if($page)
    #set($pagePos = 2) ##当前页的尾巴长度
    共$!{page.totalItem}条记录。
    #if($page.previousPageAvailable) ##如果能向上翻页
    <a href="$module.put("page",$!{page.previousPage}).build()">上一页</a>
    <a href="$module.put("page",1).build()">1</a>
    #end
    #if($!page.index>$pagePos+2) .. #end ##显示前面的省略号
    #foreach($i in [$pagePos..1]) ##增加前面的尾巴
        #if($!page.index - $i > 1)
            #set($pageIndex= $!page.index - $i)
        <a href="$module.put("page",$pageIndex).build()">$pageIndex</a>
        #end
    #end
    <span>$!page.index</span> ##显示当前页号
    #foreach($i in [1..$pagePos]) ##增加后面的尾巴
        #if($!page.totalPage - $!page.index - $i > 0)
            #set($pageIndex= $!page.index + $!i)
        <a href="$module.put("page",$pageIndex).build()">$pageIndex</a>
        #end
    #end
    #if($!page.totalPage - $!page.index > $pagePos+1) .. #end ##显示后面的省略号
    #if($page.nextPageAvailable) ##显示后面的页
    <a href="$module.put("page",$!{page.totalPage}).build()">$!{page.totalPage}</a>
    <a href="$module.put("page",$!{page.nextPage}).build()">下一页</a>
    #end
    $!module.reset()
    #end
#end



public String toString() {

StringBuilder sb = new StringBuilder();

if (pageNo == first) {// 如果是首页
sb.append("<li class=\"disabled\"><a href=\"javascript:\">&#171; 上一页</a></li>\n");
} else {
sb.append("<li><a href=\"javascript:\" onclick=\""+funcName+"("+prev+","+pageSize+",'"+funcParam+"');\">&#171; 上一页</a></li>\n");
}

int begin = pageNo - (length / 2);

if (begin < first) {
begin = first;
}

int end = begin + length - 1;

if (end >= last) {
end = last;
begin = end - length + 1;
if (begin < first) {
begin = first;
}
}

if (begin > first) {
int i = 0;
for (i = first; i < first + slider && i < begin; i++) {
sb.append("<li><a href=\"javascript:\" onclick=\""+funcName+"("+i+","+pageSize+",'"+funcParam+"');\">"
    + (i + 1 - first) + "</a></li>\n");
}
if (i < begin) {
sb.append("<li class=\"disabled\"><a href=\"javascript:\">...</a></li>\n");
}
}

for (int i = begin; i <= end; i++) {
if (i == pageNo) {
sb.append("<li class=\"active\"><a href=\"javascript:\">" + (i + 1 - first)
    + "</a></li>\n");
} else {
sb.append("<li><a href=\"javascript:\" onclick=\""+funcName+"("+i+","+pageSize+",'"+funcParam+"');\">"
    + (i + 1 - first) + "</a></li>\n");
}
}

if (last - end > slider) {
sb.append("<li class=\"disabled\"><a href=\"javascript:\">...</a></li>\n");
end = last - slider;
}

for (int i = end + 1; i <= last; i++) {
sb.append("<li><a href=\"javascript:\" onclick=\""+funcName+"("+i+","+pageSize+",'"+funcParam+"');\">"
    + (i + 1 - first) + "</a></li>\n");
}

if (pageNo == last) {
sb.append("<li class=\"disabled\"><a href=\"javascript:\">下一页 &#187;</a></li>\n");
} else {
sb.append("<li><a href=\"javascript:\" onclick=\""+funcName+"("+next+","+pageSize+",'"+funcParam+"');\">"
    + "下一页 &#187;</a></li>\n");
}

sb.append("<li class=\"disabled controls\"><a href=\"javascript:\">当前 ");
    sb.append("<input type=\"text\" value=\""+pageNo+"\" onkeypress=\"var e=window.event||this;var c=e.keyCode||e.which;if(c==13)");
                      sb.append(funcName+"(this.value,"+pageSize+",'"+funcParam+"');\" onclick=\"this.select();\"/> / ");
    sb.append("<input type=\"text\" value=\""+pageSize+"\" onkeypress=\"var e=window.event||this;var c=e.keyCode||e.which;if(c==13)");
                      sb.append(funcName+"("+pageNo+",this.value,'"+funcParam+"');\" onclick=\"this.select();\"/> 条，");
    sb.append("共 " + count + " 条"+(message!=null?message:"")+"</a></li>\n");

sb.insert(0,"<ul>\n").append("</ul>\n");

sb.append("<div style=\"clear:both;\"></div>");

//		sb.insert(0,"<div class=\"page\">\n").append("</div>\n");
return sb.toString();
}